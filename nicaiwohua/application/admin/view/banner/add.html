<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit">
<title></title>
<link rel="stylesheet" href="/static/admin/css/pintuer.css">
<link rel="stylesheet" href="/static/admin/css/admin.css">
<script src="/static/admin/js/jquery.js"></script>
<script src="/static/admin/js/pintuer.js"></script>
</head>
<body>
<div class="panel admin-panel">
  <div class="panel-head"><strong>添加轮播图</strong></div>
  <div class="body-content">
    <form method="post" class="form-x" enctype="multipart/form-data" action="{:url('banner/insert')}">
      <div class="form-group">
        <div class="label">
          <label for="sitename">轮播图名：</label>
        </div>
        <div class="field">
          <div class="field">
            <input type="text" class="input w50" id="mname" name="name" size="50" placeholder="请输入轮播图名" data-validate="required:请输入轮播图名" />       
          </div>
        </div>
      </div>      
      <div class="form-group">
        <div class="label">
          <label for="sitename">轮播排序：</label>
        </div>
        <div class="field">
          <div class="field">
            <input type="number" class="input w50" id="mname" name="sort" placeholder="请输入轮播图排序，数值越大越靠前" data-validate="required:请输入轮播图排序，数值越大越靠前" />       
          </div>
        </div>
      </div>   
      <div class="form-group">
        <div class="label">
          <label for="sitename">跳转地址：</label>
        </div>
        <div class="field">
          <div class="field">
            <input type="text" class="input w50" id="mname" name="url" size="50" placeholder="请输入轮播图跳转地址" data-validate="required:请输入轮播图跳转地址" />       
          </div>
        </div>
      </div>    
       <div class="form-group">
        <div class="label">
          <label for="sitename">轮播图展示：</label>
        </div>
        <div class="field">
          <select name="type" id="" class="input" style="width:200px" >
            <option value="0">首页</option>
            <option value="1">商城</option>
          </select>
        </div>
      </div> 
      <div class="form-group">
        <div class="label">
          <label for="sitename">轮播图片：</label>
        </div>
        <div class="field">
          <div class="field">
            <input type="file" name="img" onchange="uploads(this)" accept="image/jpeg" id="fmInput" style="display: none">   
            <button type="button" id="fmBtn" class="button border-main">文件上传</button>   
            <div id="fmDiv"></div>
          </div>
        </div>
      </div> 
        
      <div class="form-group">
        <div class="label">
          <label></label>
        </div>
        <div class="field">
          <button class="button bg-main icon-check-square-o" type="submit"> 提交</button>   
        </div>
      </div>      
    </form>
  </div>
</div>
</body></html>
<script>
  //点击上传封面图片
  $("#fmBtn").click(function(){
    $("#fmInput").click();
  });

  //封面图片被选择
  function uploads(obj)
  {
    //console.log(1111);
    var file=obj.files[0];

    //console.log(Window.FileReader);
    if(window.FileReader)
    {
      var reader=new FileReader();
      reader.readAsDataURL(file);
      //监听文件加载后事件
      reader.onloadend = function(e) {
        $("#fmDiv").html(`<img style="width:200px"  src='${e.target.result}'>`);
      };
    }
  };
</script>